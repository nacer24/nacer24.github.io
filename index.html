<!doctype html>
<html>
  <body>
    <form id="ebookForm">
      <input type="email" name="email" placeholder="Enter your email" required>
      <button>Get eBook</button>
    </form>
    <div id="msg"></div>

    <script>
      document.getElementById('ebookForm').addEventListener('submit', async function(e){
        e.preventDefault();
        const form = e.target;
        const data = new FormData(form);
        const url = "YOUR_WEBAPP_URL"; // e.g. https://script.google.com/macros/s/AKfycbzZUwz0gsWhiqFeoTrETZLCfYz8uXncSy1sgE5qlfWpcHRbKalatvJVeLZEAVU1Tsk_PA/exec

        try {
          const res = await fetch(url, { method: 'POST', body: data });
          // parse JSON response (server now returns JSON)
          const json = await res.json();
          document.getElementById('msg').textContent = json.message || json.status;
        } catch (err) {
          document.getElementById('msg').textContent = "Error: " + err;
        }
      });
    </script>
  </body>
</html>
